[build]
  base = "apps/web"
  command = "npm ci --legacy-peer-deps --prefer-offline && npm run build"
  publish = "dist"
  functions = "../api"
  
[build.environment]
  NODE_ENV = "production"
  NODE_OPTIONS = "--max-old-space-size=8192 --stack-size=2048"
  FORCE_COLOR = "1"

# Redirect all requests to /index.html for client-side routing
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
